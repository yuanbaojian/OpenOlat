(function(){tinymce.create("org.olat.core.gui.components.form.flexible.impl.elements.richText.plugins.charcount",{getInfo:function(){return{longname:"OpenOLAT character counter",author:"frentix GmbH",authorurl:"http://www.frentix.com",infourl:"http://www.frentix.com",version:"1.0.1"}},createControl:function(b,a){return null},init:function(a,c){var d;function b(){if(d){return d}var g=o_getMainWin();if(g){d=jQuery(document).ooTranslator().getTranslator(g.o_info.locale,"org.olat.core.gui.components.form.flexible.impl.elements.richText.plugins.olatcharcount")}else{d={translate:function(h){return h}}}return d}function e(){var g=a.getContent({format:"html"});g=g.trim().replace(/(\n)+/g," ");return g.length}function f(){var h=e();var g=b().translate("olatcharcount.size")+"\u00A0";a.theme.panel.find("#wordcount").text([g,h]);var i=a.getParam("maxSize");if(h>i){a.theme.panel.find("#statusbar").addClass("danger")}else{a.theme.panel.find("#statusbar").removeClass("danger")}}a.on("init",function(){var g=a.theme.panel&&a.theme.panel.find("#statusbar")[0];if(g){window.setTimeout(function(){var h=b().translate("olatcharcount.size")+"\u00A0";var j=b().translate("olatcharcount.tooltip");g.insert({type:"label",name:"wordcount",text:[h,e()],classes:"wordcount",tooltip:j,disabled:a.settings.readonly},0);a.on("setcontent beforeaddundo undo redo",function(){f()});var i=jQuery.periodic({period:5000,decay:1,max_period:Number.MAX_VALUE},function(){try{f()}catch(k){i.cancel()}})},0)}})}});tinymce.PluginManager.add("olatcharcount",org.olat.core.gui.components.form.flexible.impl.elements.richText.plugins.charcount)})();